#pragma config(Hubs,  S1, HTMotor,  HTMotor,  none,     none)
#pragma config(Sensor, S1,     ,               sensorI2CMuxController)
#pragma config(Sensor, S2,     SMUX,           sensorNone)
#pragma config(Sensor, S3,     sGyro,          sensorNone)
#pragma config(Sensor, S4,     sLiftStop,      sensorNone)
#pragma config(Motor,  motorA,          mFlagRaise1,   tmotorNXT, openLoop)
#pragma config(Motor,  motorB,          mFlagRaise2,   tmotorNXT, openLoop)
#pragma config(Motor,  motorC,          mBlockStop,    tmotorNXT, openLoop)
#pragma config(Motor,  mtr_S1_C1_1,     mDriveLeft,    tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_2,     mDriveRight,   tmotorTetrix, openLoop, reversed, encoder)
#pragma config(Motor,  mtr_S1_C2_1,     mBrush,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_2,     motorG,        tmotorTetrix, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

// Include a file to handle messages from the joystick
#include "JoystickDriver.c"

/*
*	stickToMotorValue
*	Convert the -127 - 128 stick value to a -100 - 100 motor value
*/
short stickToMotorValue(short stickValue)
{
	return (short) ( (float)stickValue * 0.78125);
}

/*
*	initializeRobot
*	Sets the robot's motors and servos to their starting values. Also
*	prepares sensors and multiplexers, as well as the NXT.
*/
void initializeRobot()
{

}

task main()
{
	initializeRobot();
	waitForStart();
	bDisplayDiagnostics = false;
	eraseDisplay();

	while(true)
	{
		getJoystickSettings(joystick);

		nxtDisplayTextLine(1, "LeftDr:%d", motor[mDriveLeft]);
		nxtDisplayTextLine(2, "RightDr:%d", motor[mDriveRight]);
		nxtDisplayTextLine(3, "LeftSt:%d", joystick.joy1_y1);
		nxtDisplayTextLine(4, "RightSt:%d", joystick.joy1_y2);

		motor[mDriveLeft] = (abs(joystick.joy1_y1) > 15)? stickToMotorValue(joystick.joy1_y1) : 0;
		motor[mDriveRight] = (abs(joystick.joy1_y2) > 15)? stickToMotorValue(joystick.joy1_y2) : 0;
		motor[mBrush] = (joy1Btn(6) == 1)? -100 : 0;

	}
}
